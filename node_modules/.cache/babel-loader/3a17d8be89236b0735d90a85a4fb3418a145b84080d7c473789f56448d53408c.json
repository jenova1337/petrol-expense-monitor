{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Mileage=()=>{const[reserveLogs,setReserveLogs]=useState([]);const[petrolLogs,setPetrolLogs]=useState([]);const[mileage,setMileage]=useState(null);useEffect(()=>{const reserves=JSON.parse(localStorage.getItem(\"reserveLogs\"))||[];const petrols=JSON.parse(localStorage.getItem(\"petrolLogs\"))||[];const sortedEvents=[...reserves.map(r=>({type:\"reserve\",...r})),...petrols.map(p=>({type:\"petrol\",...p}))].sort((a,b)=>new Date(a.date)-new Date(b.date));let A=null,B=null,C=null,L=null;for(let i=0;i<sortedEvents.length;i++){if(sortedEvents[i].type===\"reserve\"){if(!A){A=parseFloat(sortedEvents[i].km);}else if(B&&!C){C=parseFloat(sortedEvents[i].km);break;}}else if(A&&!B&&sortedEvents[i].type===\"petrol\"){B=parseFloat(sortedEvents[i].currentKm);L=parseFloat(sortedEvents[i].litres);}}if(A!==null&&B!==null&&C!==null&&L){const calculated=((C-A)/L).toFixed(2);setMileage(calculated);}},[]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\uD83D\\uDCCA Mileage Report\"}),mileage?/*#__PURE__*/_jsxs(\"p\",{children:[\"Mileage: \",/*#__PURE__*/_jsxs(\"strong\",{children:[mileage,\" km/l\"]})]}):/*#__PURE__*/_jsx(\"p\",{children:\"No mileage data to show. Add at least Reserve \\u2192 Petrol \\u2192 Reserve.\"})]});};export default Mileage;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","Mileage","reserveLogs","setReserveLogs","petrolLogs","setPetrolLogs","mileage","setMileage","reserves","JSON","parse","localStorage","getItem","petrols","sortedEvents","map","r","type","p","sort","a","b","Date","date","A","B","C","L","i","length","parseFloat","km","currentKm","litres","calculated","toFixed","children"],"sources":["/data/data/com.termux/files/home/petrol-expense-monitor-full/src/components/Mileage.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\n\nconst Mileage = () => {\n  const [reserveLogs, setReserveLogs] = useState([]);\n  const [petrolLogs, setPetrolLogs] = useState([]);\n  const [mileage, setMileage] = useState(null);\n\n  useEffect(() => {\n    const reserves = JSON.parse(localStorage.getItem(\"reserveLogs\")) || [];\n    const petrols = JSON.parse(localStorage.getItem(\"petrolLogs\")) || [];\n\n    const sortedEvents = [\n      ...reserves.map((r) => ({ type: \"reserve\", ...r })),\n      ...petrols.map((p) => ({ type: \"petrol\", ...p })),\n    ].sort((a, b) => new Date(a.date) - new Date(b.date));\n\n    let A = null, B = null, C = null, L = null;\n\n    for (let i = 0; i < sortedEvents.length; i++) {\n      if (sortedEvents[i].type === \"reserve\") {\n        if (!A) {\n          A = parseFloat(sortedEvents[i].km);\n        } else if (B && !C) {\n          C = parseFloat(sortedEvents[i].km);\n          break;\n        }\n      } else if (A && !B && sortedEvents[i].type === \"petrol\") {\n        B = parseFloat(sortedEvents[i].currentKm);\n        L = parseFloat(sortedEvents[i].litres);\n      }\n    }\n\n    if (A !== null && B !== null && C !== null && L) {\n      const calculated = ((C - A) / L).toFixed(2);\n      setMileage(calculated);\n    }\n  }, []);\n\n  return (\n    <div>\n      <h3>ðŸ“Š Mileage Report</h3>\n      {mileage ? (\n        <p>\n          Mileage: <strong>{mileage} km/l</strong>\n        </p>\n      ) : (\n        <p>No mileage data to show. Add at least Reserve â†’ Petrol â†’ Reserve.</p>\n      )}\n    </div>\n  );\n};\n\nexport default Mileage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}