{"ast":null,"code":"// src/components/Mileage.js\nimport React,{useState,useEffect}from\"react\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Mileage=()=>{const[mileage,setMileage]=useState(null);const[message,setMessage]=useState(\"\");useEffect(()=>{const reserveLogs=JSON.parse(localStorage.getItem(\"reserveLogs\"))||[];const petrolLogs=JSON.parse(localStorage.getItem(\"petrolLogs\"))||[];// Combine and sort all logs by date\nconst combinedLogs=[...reserveLogs.map(log=>({...log,type:\"reserve\"})),...petrolLogs.map(log=>({...log,type:\"petrol\"}))].sort((a,b)=>new Date(a.date)-new Date(b.date));// Find pattern: reserve ‚Üí petrol ‚Üí reserve\nlet beforeReserve=null;let petrol=null;let afterReserve=null;for(let i=0;i<combinedLogs.length-2;i++){if(combinedLogs[i].type===\"reserve\"&&combinedLogs[i+1].type===\"petrol\"&&combinedLogs[i+2].type===\"reserve\"){beforeReserve=combinedLogs[i];petrol=combinedLogs[i+1];afterReserve=combinedLogs[i+2];break;}}if(beforeReserve&&petrol&&afterReserve){const kmBefore=parseFloat(beforeReserve.km);const kmAfter=parseFloat(afterReserve.km);const litres=parseFloat(petrol.litres);if(kmAfter>kmBefore&&litres>0){const result=((kmAfter-kmBefore)/litres).toFixed(2);setMileage({before:kmBefore,after:kmAfter,litres,mileage:result,date:petrol.date});}else{setMessage(\"Data invalid for mileage calculation.\");}}else{setMessage(\"No mileage data to show. Add at least Reserve ‚Üí Petrol ‚Üí Reserve.\");}},[]);return/*#__PURE__*/_jsxs(\"div\",{style:{padding:20},children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\uD83D\\uDCCA Mileage Report\"}),mileage?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\uD83D\\uDD52 Date:\"}),\" \",mileage.date]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Before Reserve KM:\"}),\" \",mileage.before]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"After Reserve KM:\"}),\" \",mileage.after]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Petrol Used:\"}),\" \",mileage.litres,\" litres\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\uD83D\\uDEE3\\uFE0F Mileage:\"}),\" \",mileage.mileage,\" km/l\"]})]}):/*#__PURE__*/_jsx(\"p\",{children:message})]});};export default Mileage;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","Mileage","mileage","setMileage","message","setMessage","reserveLogs","JSON","parse","localStorage","getItem","petrolLogs","combinedLogs","map","log","type","sort","a","b","Date","date","beforeReserve","petrol","afterReserve","i","length","kmBefore","parseFloat","km","kmAfter","litres","result","toFixed","before","after","style","padding","children"],"sources":["/data/data/com.termux/files/home/petrol-expense-monitor-full/src/components/Mileage.js"],"sourcesContent":["// src/components/Mileage.js\nimport React, { useState, useEffect } from \"react\";\n\nconst Mileage = () => {\n  const [mileage, setMileage] = useState(null);\n  const [message, setMessage] = useState(\"\");\n\n  useEffect(() => {\n    const reserveLogs = JSON.parse(localStorage.getItem(\"reserveLogs\")) || [];\n    const petrolLogs = JSON.parse(localStorage.getItem(\"petrolLogs\")) || [];\n\n    // Combine and sort all logs by date\n    const combinedLogs = [\n      ...reserveLogs.map(log => ({ ...log, type: \"reserve\" })),\n      ...petrolLogs.map(log => ({ ...log, type: \"petrol\" })),\n    ].sort((a, b) => new Date(a.date) - new Date(b.date));\n\n    // Find pattern: reserve ‚Üí petrol ‚Üí reserve\n    let beforeReserve = null;\n    let petrol = null;\n    let afterReserve = null;\n\n    for (let i = 0; i < combinedLogs.length - 2; i++) {\n      if (\n        combinedLogs[i].type === \"reserve\" &&\n        combinedLogs[i + 1].type === \"petrol\" &&\n        combinedLogs[i + 2].type === \"reserve\"\n      ) {\n        beforeReserve = combinedLogs[i];\n        petrol = combinedLogs[i + 1];\n        afterReserve = combinedLogs[i + 2];\n        break;\n      }\n    }\n\n    if (beforeReserve && petrol && afterReserve) {\n      const kmBefore = parseFloat(beforeReserve.km);\n      const kmAfter = parseFloat(afterReserve.km);\n      const litres = parseFloat(petrol.litres);\n\n      if (kmAfter > kmBefore && litres > 0) {\n        const result = ((kmAfter - kmBefore) / litres).toFixed(2);\n        setMileage({\n          before: kmBefore,\n          after: kmAfter,\n          litres,\n          mileage: result,\n          date: petrol.date,\n        });\n      } else {\n        setMessage(\"Data invalid for mileage calculation.\");\n      }\n    } else {\n      setMessage(\"No mileage data to show. Add at least Reserve ‚Üí Petrol ‚Üí Reserve.\");\n    }\n  }, []);\n\n  return (\n    <div style={{ padding: 20 }}>\n      <h3>üìä Mileage Report</h3>\n      {mileage ? (\n        <div>\n          <p><strong>üïí Date:</strong> {mileage.date}</p>\n          <p><strong>Before Reserve KM:</strong> {mileage.before}</p>\n          <p><strong>After Reserve KM:</strong> {mileage.after}</p>\n          <p><strong>Petrol Used:</strong> {mileage.litres} litres</p>\n          <p><strong>üõ£Ô∏è Mileage:</strong> {mileage.mileage} km/l</p>\n        </div>\n      ) : (\n        <p>{message}</p>\n      )}\n    </div>\n  );\n};\n\nexport default Mileage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}