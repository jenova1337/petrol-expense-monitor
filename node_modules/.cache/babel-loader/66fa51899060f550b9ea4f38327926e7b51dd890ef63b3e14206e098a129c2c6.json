{"ast":null,"code":"// Summary.js - React component\nimport React,{useEffect,useState}from\"react\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Summary=()=>{const[data,setData]=useState([]);const[bikes,setBikes]=useState([]);const[weeklySummary,setWeeklySummary]=useState({});const[monthlySummary,setMonthlySummary]=useState({});const[showSummary,setShowSummary]=useState(false);useEffect(()=>{const storedData=JSON.parse(localStorage.getItem(\"petrolLogs\"))||[];const storedBikes=JSON.parse(localStorage.getItem(\"bikes\"))||[];setData(storedData);setBikes(storedBikes);calculateSummaries(storedData);},[]);const calculateSummaries=logs=>{const now=new Date();const oneWeekAgo=new Date(now);oneWeekAgo.setDate(now.getDate()-7);const oneMonthAgo=new Date(now);oneMonthAgo.setMonth(now.getMonth()-1);const weekly={};const monthly={};logs.forEach(log=>{const logDate=new Date(log.date);const km=parseFloat(log.km||0);const amount=parseFloat(log.amount||0);if(logDate>=oneWeekAgo){if(!weekly[log.bike])weekly[log.bike]={km:0,amount:0};weekly[log.bike].km+=km;weekly[log.bike].amount+=amount;}if(logDate>=oneMonthAgo){if(!monthly[log.bike])monthly[log.bike]={km:0,amount:0};monthly[log.bike].km+=km;monthly[log.bike].amount+=amount;}});setWeeklySummary(weekly);setMonthlySummary(monthly);};const groupByBike=()=>{const grouped={};data.forEach((log,index)=>{if(!grouped[log.bike])grouped[log.bike]=[];grouped[log.bike].push({...log,index:index+1});});return grouped;};const bikeLogs=groupByBike();return/*#__PURE__*/_jsxs(\"div\",{style:{padding:\"20px\"},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\uD83D\\uDCCA Summary\"}),Object.keys(bikeLogs).length===0&&/*#__PURE__*/_jsx(\"p\",{children:\"No data to show.\"}),Object.entries(bikeLogs).map(_ref=>{let[bike,logs]=_ref;return/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:\"30px\"},children:[/*#__PURE__*/_jsx(\"h3\",{children:bike}),/*#__PURE__*/_jsxs(\"table\",{border:\"1\",cellPadding:\"6\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"S.No\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Petrol \\u20B9\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Amount \\u20B9\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Litres\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Total KM\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:logs.map((log,idx)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:idx+1}),/*#__PURE__*/_jsx(\"td\",{children:log.date}),/*#__PURE__*/_jsx(\"td\",{children:log.rate}),/*#__PURE__*/_jsx(\"td\",{children:log.amount}),/*#__PURE__*/_jsx(\"td\",{children:log.litres}),/*#__PURE__*/_jsx(\"td\",{children:log.km})]},idx))})]})]},bike);}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowSummary(!showSummary),children:[showSummary?\"Hide\":\"Show\",\" Weekly & Monthly Summary\"]}),showSummary&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\uD83D\\uDDD3\\uFE0F Weekly Summary\"}),/*#__PURE__*/_jsx(\"ul\",{children:Object.entries(weeklySummary).map(_ref2=>{let[bike,sum]=_ref2;return/*#__PURE__*/_jsxs(\"li\",{children:[bike,\" \\u2013 KM: \",sum.km,\" | \\u20B9: \",sum.amount]},bike);})}),/*#__PURE__*/_jsx(\"h4\",{children:\"\\uD83D\\uDCC5 Monthly Summary\"}),/*#__PURE__*/_jsx(\"ul\",{children:Object.entries(monthlySummary).map(_ref3=>{let[bike,sum]=_ref3;return/*#__PURE__*/_jsxs(\"li\",{children:[bike,\" \\u2013 KM: \",sum.km,\" | \\u20B9: \",sum.amount]},bike);})})]})]});};export default Summary;","map":{"version":3,"names":["React","useEffect","useState","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Summary","data","setData","bikes","setBikes","weeklySummary","setWeeklySummary","monthlySummary","setMonthlySummary","showSummary","setShowSummary","storedData","JSON","parse","localStorage","getItem","storedBikes","calculateSummaries","logs","now","Date","oneWeekAgo","setDate","getDate","oneMonthAgo","setMonth","getMonth","weekly","monthly","forEach","log","logDate","date","km","parseFloat","amount","bike","groupByBike","grouped","index","push","bikeLogs","style","padding","children","Object","keys","length","entries","map","_ref","marginBottom","border","cellPadding","idx","rate","litres","onClick","_ref2","sum","_ref3"],"sources":["/data/data/com.termux/files/home/petrol-expense-monitor-full/src/components/Summary.js"],"sourcesContent":["// Summary.js - React component\nimport React, { useEffect, useState } from \"react\";\n\nconst Summary = () => {\n  const [data, setData] = useState([]);\n  const [bikes, setBikes] = useState([]);\n  const [weeklySummary, setWeeklySummary] = useState({});\n  const [monthlySummary, setMonthlySummary] = useState({});\n  const [showSummary, setShowSummary] = useState(false);\n\n  useEffect(() => {\n    const storedData = JSON.parse(localStorage.getItem(\"petrolLogs\")) || [];\n    const storedBikes = JSON.parse(localStorage.getItem(\"bikes\")) || [];\n\n    setData(storedData);\n    setBikes(storedBikes);\n\n    calculateSummaries(storedData);\n  }, []);\n\n  const calculateSummaries = (logs) => {\n    const now = new Date();\n    const oneWeekAgo = new Date(now);\n    oneWeekAgo.setDate(now.getDate() - 7);\n    const oneMonthAgo = new Date(now);\n    oneMonthAgo.setMonth(now.getMonth() - 1);\n\n    const weekly = {};\n    const monthly = {};\n\n    logs.forEach((log) => {\n      const logDate = new Date(log.date);\n      const km = parseFloat(log.km || 0);\n      const amount = parseFloat(log.amount || 0);\n\n      if (logDate >= oneWeekAgo) {\n        if (!weekly[log.bike]) weekly[log.bike] = { km: 0, amount: 0 };\n        weekly[log.bike].km += km;\n        weekly[log.bike].amount += amount;\n      }\n\n      if (logDate >= oneMonthAgo) {\n        if (!monthly[log.bike]) monthly[log.bike] = { km: 0, amount: 0 };\n        monthly[log.bike].km += km;\n        monthly[log.bike].amount += amount;\n      }\n    });\n\n    setWeeklySummary(weekly);\n    setMonthlySummary(monthly);\n  };\n\n  const groupByBike = () => {\n    const grouped = {};\n    data.forEach((log, index) => {\n      if (!grouped[log.bike]) grouped[log.bike] = [];\n      grouped[log.bike].push({ ...log, index: index + 1 });\n    });\n    return grouped;\n  };\n\n  const bikeLogs = groupByBike();\n\n  return (\n    <div style={{ padding: \"20px\" }}>\n      <h2>üìä Summary</h2>\n      {Object.keys(bikeLogs).length === 0 && <p>No data to show.</p>}\n\n      {Object.entries(bikeLogs).map(([bike, logs]) => (\n        <div key={bike} style={{ marginBottom: \"30px\" }}>\n          <h3>{bike}</h3>\n          <table border=\"1\" cellPadding=\"6\">\n            <thead>\n              <tr>\n                <th>S.No</th>\n                <th>Date</th>\n                <th>Petrol ‚Çπ</th>\n                <th>Amount ‚Çπ</th>\n                <th>Litres</th>\n                <th>Total KM</th>\n              </tr>\n            </thead>\n            <tbody>\n              {logs.map((log, idx) => (\n                <tr key={idx}>\n                  <td>{idx + 1}</td>\n                  <td>{log.date}</td>\n                  <td>{log.rate}</td>\n                  <td>{log.amount}</td>\n                  <td>{log.litres}</td>\n                  <td>{log.km}</td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      ))}\n\n      <button onClick={() => setShowSummary(!showSummary)}>\n        {showSummary ? \"Hide\" : \"Show\"} Weekly & Monthly Summary\n      </button>\n\n      {showSummary && (\n        <>\n          <h4>üóìÔ∏è Weekly Summary</h4>\n          <ul>\n            {Object.entries(weeklySummary).map(([bike, sum]) => (\n              <li key={bike}>\n                {bike} ‚Äì KM: {sum.km} | ‚Çπ: {sum.amount}\n              </li>\n            ))}\n          </ul>\n\n          <h4>üìÖ Monthly Summary</h4>\n          <ul>\n            {Object.entries(monthlySummary).map(([bike, sum]) => (\n              <li key={bike}>\n                {bike} ‚Äì KM: {sum.km} | ‚Çπ: {sum.amount}\n              </li>\n            ))}\n          </ul>\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default Summary;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}